{% extends 'djangopypi/base.html' %}
{% load safemarkup %}

{% block title %}{{ release }}{% endblock %}
{% block extra_head %}
<link rel="meta" title="DOAP" type="application/rdf+xml"
      href="{% url djangopypi-release-doap package=release.package.name version=release.version %}">{% endblock %}
{% block content %}

<h1>{{ release }}</h1>
{% ifnotequal release release.package.latest %}
<div class="alert alert-error">
  This is not the latest version.<br>
  It's advised you use the latest version at
  <a href="{{ release.package.latest.get_absolute_url }}">{{ release.package.latest }}</a>
</div>
{% endifnotequal %}

<div class="well">
  {{ release.description|saferst }}
</div>

{% if release.distributions.count %}
<h2>Downloads</h2>
<table class="table table-striped">
  <thead>
    <th>Type</th>
    <th>Python Version</th>
    <th>Created</th>
    <th>Uploader</th>
    <th>Download</th>
  </thead>

  <tbody>
    {% for dist in release.distributions.all %}
    <tr>
      <td>{{ dist.filetype }}</td>
      <td>
        <span class="label label-info">Python {{ dist.pyversion }}</span>
      </td>
      <td>{{ dist.created }}</td>
      <td><i class="icon-user"></i> {{ dist.uploader }}</td>
      <td>
        <a class="btn btn-primary btn-small" href="{{ dist.get_absolute_url }}">Download</a>
        {{ dist.content.size|filesizeformat }}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}
{% endblock %}
